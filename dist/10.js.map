{"version":3,"sources":["webpack:///./src/signin/root.component.js","webpack:///./src/signin/signin.app.js"],"names":["Signin","state","email","document","cookie","password","userlogged","error","handlechange","e","_this$setState","_this","setState","target","id","value","handlesubmit","preventDefault","console","log","axios","post","then","response","data","length","date","Date","setTime","getTime","min","toGMTString","window","location","href","Materialize","toast","render","react_default","a","createElement","className","onSubmit","this","type","required","aria-required","onChange","htmlFor","name","onClick","React","Component","__webpack_require__","d","__webpack_exports__","bootstrap","mount","unmount","reactLifecycles","singleSpaReact","ReactDOM","rootComponent","domElementGetter","getElementById"],"mappings":"uVAuGeA,mQA1FbC,MAAM,CACJC,MAAOC,SAASC,QAAU,GAC1BC,SAAS,GACTC,WAAW,GACXC,MAAM,MAGRC,aAAc,SAACC,GAAI,IAAAC,EACjBC,EAAKC,WAALF,EAAA,IACGD,EAAEI,OAAOC,IAAIL,EAAEI,OAAOE,MADzBL,OAKFM,aAAc,SAACP,GACbA,EAAEQ,iBACFC,QAAQC,IAAIR,EAAKV,OAGjBmB,IAAMC,KAAK,kDAAkD,CAC3DnB,MAAMS,EAAKV,MAAMC,MACjBG,SAASM,EAAKV,MAAMI,WACnBiB,KAAK,SAACC,GACPL,QAAQC,IAAII,GACTA,EAASC,KAAKC,OAAO,IAEtBd,EAAKC,SAAS,CAACN,YAAW,GAAO,WAE7B,IAAIoB,EAAO,IAAIC,KAGfD,EAAKE,QAAQF,EAAKG,UAAaC,KAC/B3B,SAASC,OAAS,OAAcmB,EAASC,KAAO,aAAeE,EAAKK,cACpE5B,SAASC,OAAS,SAAgBO,EAAKV,MAAMC,MAAQ,aAAewB,EAAKK,gBAG7Eb,QAAQC,IAAII,EAASC,MAErBQ,OAAOC,SAASC,KAAO,MAIvBvB,EAAKC,SAAS,CACZL,MAAMgB,EAASC,OAEjBN,QAAQC,IAAIR,EAAKV,MAAMM,OAErBI,EAAKV,MAAMM,QACT4B,YAAYC,MAAMzB,EAAKV,MAAMM,MAAO,IAAO,eAC3CI,EAAKC,SAAS,CACZL,MAAM,mWAQlB8B,kBACE,OACIC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OAEbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBACbH,EAAAC,EAAAC,cAAA,QAAME,SAAUC,KAAK3B,cAEnBsB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACXH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,SAAO1B,GAAG,QAAQ8B,KAAK,QAAQH,UAAU,WAAWI,SAAS,GAAGC,gBAAc,OAAOC,SAAUJ,KAAKnC,eAClG8B,EAAAC,EAAAC,cAAA,SAAOQ,QAAQ,SAAf,WAINV,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,SAAOI,KAAK,WAAWK,KAAK,WAAWnC,GAAG,WAAWiC,SAAUJ,KAAKnC,eACpE8B,EAAAC,EAAAC,cAAA,SAAOQ,QAAQ,YAAf,aAGFV,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAAf,KACEH,EAAAC,EAAAC,cAAA,SAAOI,KAAK,SAASM,QAASP,KAAK3B,aAAaD,MAAM,SAAS0B,UAAU,iBAhFxEU,IAAMC,WCX3BC,EAAAC,EAAAC,EAAA,8BAAAC,IAAAH,EAAAC,EAAAC,EAAA,0BAAAE,IAAAJ,EAAAC,EAAAC,EAAA,4BAAAG,IAQA,IAAMC,EAAkBC,IAAe,CACrCT,UACAU,aACAC,cAAe9D,EACf+D,iBAgBF,WACE,OAAO5D,SAAS6D,eAAe,aAdpBR,EAAY,CACvBG,EAAgBH,WAGLC,EAAQ,CACnBE,EAAgBF,OAGLC,EAAU,CACrBC,EAAgBD","file":"10.js","sourcesContent":["import React from \"react\";\r\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  Redirect\r\n} from \"react-router-dom\";\r\nimport axios from 'axios';  //to make the post request\r\n\r\nclass Signin extends React.Component{\r\n\r\n  state={\r\n    email: document.cookie || '',\r\n    password:'',\r\n    userlogged:'',\r\n    error:''\r\n  }\r\n  \r\n  handlechange =(e)=>{\r\n    this.setState({\r\n      [e.target.id]:e.target.value\r\n    })\r\n  }\r\n\r\n  handlesubmit =(e)=>{\r\n    e.preventDefault();\r\n    console.log(this.state)\r\n    //call login microservice signin\r\n    //http://localhost:1114/login'\r\n    axios.post('http://minipc2.informatik.tu-chemnitz.de/signin',{\r\n      email:this.state.email,\r\n      password:this.state.password\r\n    }).then((response)=>{\r\n      console.log(response);\r\n      if(response.data.length>20){\r\n        \r\n        this.setState({userlogged:true}, ()=>\r\n          {\r\n            var date = new Date();\r\n            var min=10; //this should be set as long as the jwt validity\r\n            //set cookies with email and the received jwt\r\n            date.setTime(date.getTime() + (min * 60 * 1000)); //10 min\r\n            document.cookie = \"jwt\" + \"=\" + response.data + \"; expires=\" + date.toGMTString();\r\n            document.cookie = 'email' + \"=\" + this.state.email + \"; expires=\" + date.toGMTString();\r\n          }\r\n        )\r\n        console.log(response.data);\r\n\r\n        window.location.href = '/'; //redirect home\r\n        //window.location.reload();\r\n      }\r\n      else{                       //the response has errors\r\n        this.setState({\r\n          error:response.data     \r\n        })\r\n        console.log(this.state.error);\r\n        {\r\n          this.state.error ? (  //show the response error\r\n            Materialize.toast(this.state.error, 3000 , 'red rounded'),\r\n            this.setState({     //clear the error\r\n              error:''\r\n            })\r\n          ) : null\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  render(){\r\n    return(//show the login form\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n\r\n            <div className=\"card-panel center\">\r\n              <form onSubmit={this.handlesubmit}>\r\n\r\n                <div className=\"input-field\">\r\n                    <div className=\"left-align\">\r\n                      <input id=\"email\" type=\"email\" className=\"validate\" required=\"\" aria-required=\"true\" onChange={this.handlechange}/>\r\n                        <label htmlFor=\"email\">Email</label>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"input-field\">\r\n                    <input type=\"password\" name=\"password\" id=\"password\" onChange={this.handlechange}/>\r\n                    <label htmlFor=\"password\">Password</label>\r\n                  </div>\r\n\r\n                  <div className=\"left-align\">  {/* This div wrapper is necessary for the left alignment */}\r\n                    <input type=\"button\" onClick={this.handlesubmit}value=\"Log in\" className=\"btn\"/>\r\n                  </div>\r\n\r\n              </form>\r\n             </div>\r\n\r\n          </div>\r\n        </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Signin;","// home.app.js\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport singleSpaReact from 'single-spa-react';\r\nimport Signin from './root.component.js';\r\n\r\n\r\n\r\nconst reactLifecycles = singleSpaReact({\r\n  React,\r\n  ReactDOM,\r\n  rootComponent: Signin,\r\n  domElementGetter,\r\n})\r\n\r\nexport const bootstrap = [\r\n  reactLifecycles.bootstrap,\r\n];\r\n\r\nexport const mount = [\r\n  reactLifecycles.mount,\r\n];\r\n\r\nexport const unmount = [\r\n  reactLifecycles.unmount,\r\n];\r\n\r\n// the location where SPA mounts the application\r\nfunction domElementGetter() {\r\n  return document.getElementById(\"signin\")\r\n}"],"sourceRoot":""}